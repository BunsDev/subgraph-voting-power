type User @entity {
  id: ID! # address
  voteWeight: BigInt!
  gno: BigInt!
  mgno: BigInt!
  lgno: BigInt!
  deposit: BigInt!
  weightedPoolPositions: [ConcentratedLiquidityPosition!]!
    @derivedFrom(field: "user")
  concentratedLiquidityPositions: [ConcentratedLiquidityPosition!]!
    @derivedFrom(field: "user")
}

# used for Uniswap V2 pairs and Balancer weighted pools
type WeightedPool @entity {
  id: ID! # address
  gnoBalance: BigInt!
  totalSupply: BigInt!
}
type WeightedPoolPosition @entity {
  id: ID! # <PAIR_ADDRESS>-<USER_ADDRESS>
  user: User!
  pool: WeightedPool!
  liquidity: BigInt!
}

# used for Uniswap V3 pairs
type ConcentratedLiquidityPair @entity {
  id: ID! # address
  sqrtRatio: BigDecimal!
  gnoIsFirst: Boolean!
  positions: [AMMPosition!]!
}
type ConcentratedLiquidityPosition @entity {
  id: ID! # <PAIR_ADDRESS>-<USER_ADDRESS> or <PAIR_ADDRESS>-<TOKEN_ID> for UniV3
  user: User!
  pair: ConcentratedLiquidityPair!
  liquidity: BigInt!
  lowerTick: BigInt!
  upperTick: BigInt!
}
